# UDP可靠传输
#### 思考题
* 有tcp，为什么还要udp可靠传输？
* tcp为什么吞吐量不行
* 延迟ack和吞吐量有什么关系
* 满启动和吞吐量
* 什么情况下内核协议栈处理不过
* tcp资源多，哪些资源多

#### udp
* udp比IP多八个字节
* 系统的时间同步程序
* 端口是虚拟的软件的数字
* fd是四元组的索引

#### udp为什么会粘包

#### 四元组
* local_ip local_port,remote_ip,remote_port,proto

#### tcp传输
* 第一 间隔9，10的无效的重传
* 接收端启动定时器等待确认，有新的定时器过来，重置定时器
* 第二 延迟ACK太大
* 发送端启动超时定时器
* R = a*R_old + (1 - a)*R_new
* RTT一直在变
* RTO = b * R_new
* 第三 ack延迟确认会导致RTT很大比实际需要要大
* 延迟ACK是等接收端定时器到时间了所有的包都收到了再给发送方确认ACK
* 重传结束的位置=ACK开始位置+cwd窗口大小位置
* KCP的RTO=1.5*RTT
* 使用时间戳来确认ACK

#### kcp解决TCP的三个缺点
* 连续两次跨越同一个包就重传这个包
* 
