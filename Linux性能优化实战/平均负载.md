# 平均负载
#### 定义
* 单位时间内，系统处于可运行状态和不可中断状态的平均进程数，和cpu使用率没有直接关系
* 包括了正在使用 CPU 的进程，还包括等待 CPU 和等待 I/O 的进程。
* 本质上是平均活跃进程数
* 

#### 过载
* 一旦1分钟的平均负载接近或超过了CPU的个数，就意味着系统正在发生过载的问题
* 排查问题的阀门
* ***当平均负载高于 CPU 数量 70% 的时候，你就应该分析排查负载高的问题了。***

#### cpu负载和cpu对应率的关系
* CPU 密集型进程，使用大量 CPU 会导致平均负载升高，此时这两者是一致的。
* I/O 密集型进程，等待 I/O 也会导致平均负载升高，但 CPU 使用率不一定很高。
* 大量等待 CPU 的进程调度也会导致平均负载升高，此时的 CPU 使用率也会比较高。

#### 工具stress和sysstat
* stress系统压力测试工具
* sysstat作为性能工具
* mpstat 是一个常用的多核 CPU 性能分析工具，用来实时查看每个 CPU 的性能指标，以及所有 CPU 的平均指标。
* pidstat 是一个常用的进程性能分析工具，用来实时查看进程的 CPU、内存、I/O 以及上下文切换等性能指标。
* pidstat wait就是进程等待CPU时间
* stress 缓冲区可能比较小，无法产生大的IO压力，这样大部分就都是系统调用的消耗了
