# 系统IO瓶颈
#### IO性能指标
![9e42aaf53ff4a544b9a7b03b6ce63f38](media/15486417501301/9e42aaf53ff4a544b9a7b03b6ce63f38.png)

#### 文件系统I/O性能指标
* 存储空间的使用情况，包括容量、使用量以及剩余空间
* 索引节点使用情况
* 页缓存、目录项缓存、索引节点缓存以及各个具体文件系统（如 ext4、XFS 等）的缓存
* IOPS
* 响应时间
* 吞吐量 B/s

#### 磁盘I/O性能指标
* 使用率，是指磁盘忙处理 I/O 请求的百分比。过高的使用率（比如超过 60%）通常意味着磁盘 I/O 存在性能瓶颈。
* IOPS（Input/Output Per Second），是指每秒的 I/O 请求数。
* 吞吐量，是指每秒的 I/O 请求大小。
* 响应时间，是指从发出 I/O 请求到收到响应的间隔时间。
![b6d67150e471e1340a6f3c3dc3ba0120](media/15486417501301/b6d67150e471e1340a6f3c3dc3ba0120.png)

#### 性能工具
* 文件系统缓存 /proc/meminfo、/proc/slabinfo 以及 slabtop
* 磁盘 iostat pidstat filetop opensnoop

#### 工具和性能指标图
![6f26fa18a73458764fcda00212006698](media/15486417501301/6f26fa18a73458764fcda00212006698.png)
![c48b6664c6d334695ed881d5047446e9](media/15486417501301/c48b6664c6d334695ed881d5047446e9.png)

#### IO性能指标分析套路
* 先用 iostat 发现磁盘 I/O 性能瓶颈；
* 再借助 pidstat ，定位出导致瓶颈的进程；
* 随后分析进程的 I/O 行为；
* 最后，结合应用程序的原理，分析这些 I/O 的来源。![1802a35475ee2755fb45aec55ed2d98a](media/15486417501301/1802a35475ee2755fb45aec55ed2d98a.png)

#### 