# 分区表
#### 分区表和手工分表
* 分区表和手工分表，一个是由 server 层来决定使用哪个分区，一个是由应用层代码来决定使用哪个分表

#### MyISAM和Innodb
* MyISAM 分区表使用的分区策略，我们称为通用分区策略（generic partitioning），每次访问分区都由 server 层控制
* InnoDB 引擎引入了本地分区策略（native partitioning）。这个策略是在 InnoDB 内部自己管理打开分区的行为

#### truncate和delete
* delete和truncate table的最大区别是delete可以通过WHERE语句选择要删除的记录。但执行得速度不快。而且还可以返回被删除的记录数。而truncate table无法删除指定的记录，而且不能返回被删除的记录。但它执行得非常快。

#### 分区表行为
* MySQL 在第一次打开分区表的时候，需要访问所有的分区；
* 在 server 层，认为这是同一张表，因此所有分区共用同一个 MDL 锁；
* 在引擎层，认为这是不同的表，因此 MDL 锁之后的执行过程，会根据分区表规则，只访问必要的分区。

#### 应用场景
* 分区表的一个显而易见的优势是对业务透明，相对于用户分表来说，使用分区表的业务代码更简洁。还有，分区表可以很方便的清理历史数据。

#### 分区
* 范围分区
* hash分区
* list分区

#### 注意事项
* 不要创建太多的分区
* 分区不是越细越好
* 分区不需要预留太多

#### 经典分区分表的场景
* zabbix历史数据表的改造,利用存储过程创建和改造
* 后台数据的分析汇总,比如日志数据,便于清理