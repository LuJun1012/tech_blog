# Innodb和Memory引擎
#### Memory引擎
* InnoDB 引擎把数据放在主键索引上，其他索引上保存的是主键 id。这种方式，我们称之为索引组织表（Index Organizied Table）。
* 而 Memory 引擎采用的是把数据单独存放，索引上保存数据位置的数据组织形式，我们称之为堆组织表（Heap Organizied Table）。

#### 引擎的区别
* InnoDB 表的数据总是有序存放的，而内存表的数据就是按照写入顺序存放的；
* 当数据文件有空洞的时候，InnoDB 表在插入新数据的时候，为了保证数据有序性，只能在固定的位置写入新值，而内存表找到空位就可以插入新值；
* 数据位置发生变化的时候，InnoDB 表只需要修改主键索引，而内存表需要修改所有索引；
* InnoDB 表用主键索引查询时需要走一次索引查找，用普通索引查询的时候，需要走两次索引查找。而内存表没有这个区别，所有索引的“地位”都是相同的。
* InnoDB 支持变长数据类型，不同记录的长度可能不同；内存表不支持 Blob 和 Text 字段，并且即使定义了 varchar(N)，实际也当作 char(N)，也就是固定长度字符串来存储，因此内存表的每行数据长度相同

#### 内存引擎的问题
* 锁粒度问题 不支持行锁
* 数据持久化问题
* 备库重启会导致主备同步停止
* 备库重启后删除内存临时表，在双M的结构中会把另外一个主库的内存表也清除

#### 内存临时表可以使用的原因
* 临时表不会被其他线程访问，没有并发性的问题；
* 临时表重启后也是需要删除的，清空数据这个问题不存在；
* 备库的临时表也不会影响主库的用户线程。

#### 