# 幻读
#### 概念
* 幻读仅仅指新插入的行
* 幻读指的是一个事务在前后两次查询同一个范围的时候，后一次查询看到了前一次查询没有看到的行。

#### 当前读
* for update

#### 幻读引发的问题
* 数据一致性是数据库内部数据状态在此刻的一致性，还包含了数据和日志在逻辑上的一致性

#### 间隙锁
* 保护两个值之间的空隙不允许插入新的值
* 在可重复读的级别下生效，读提交的情况下间隙锁不会生效
* 读提交下操作数据的锁范围更小，这个选择是合理的
* binlog_format=row配合间隙锁解决数据和日志不一致
* binlog和实际操作的结果数据不一致
* 
