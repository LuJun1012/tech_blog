# SQL 执行方式
#### mysql架构
* ![c4b24ef2377e0d233af69925b0d7139e](media/15660840293357/c4b24ef2377e0d233af69925b0d7139e.png)

#### sql层架构
* ![30819813cc9d53714c08527e282ede79-2](media/15660840293357/30819813cc9d53714c08527e282ede79-2.jpg)
* 查询缓存：Server 如果在查询缓存中发现了这条 SQL 语句，就会直接将结果返回给客户端；如果没有，就进入到解析器阶段。需要说明的是，因为查询缓存往往效率不高，所以在 MySQL8.0 之后就抛弃了这个功能。
* 解析器：在解析器中对 SQL 语句进行语法分析、语义分析。
* 优化器：在优化器中会确定 SQL 语句的执行路径，比如是根据全表检索，还是根据索引来检索等。
* 执行器：在执行之前需要判断该用户是否具备权限，如果具备权限就执行 SQL 查询并返回结果。在 MySQL8.0 以下的版本，如果设置了查询缓存，这时会将查询结果进行缓存

#### sql执行分析
* set profiling = 1;
* show profile
* 